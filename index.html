<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iOS-Style Call Buttons</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/lucide.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    }
    
    body {
      background-color: #000;
      color: #fff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      touch-action: none;
      overflow: hidden;
    }

    .call-container {
      position: relative;
      width: 100%;
      max-width: 400px;
      padding: 20px;
      margin-top: auto;
      margin-bottom: 50px;
    }

    .call-info {
      text-align: center;
      margin-bottom: 40px;
    }

    .call-info h1 {
      font-size: 28px;
      margin-bottom: 8px;
    }

    .call-info p {
      font-size: 16px;
      color: #999;
    }

    .buttons-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      position: relative;
    }

    .button-wrapper {
      position: relative;
      width: 160px;
      height: 60px;
      overflow: hidden;
    }

    .slider-track {
      position: absolute;
      width: 100%;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 30px;
      overflow: hidden;
    }

    .button {
      position: absolute;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: grab;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      z-index: 10;
      transition: transform 0.3s ease-out;
    }

    .decline-btn {
      background-color: #d9262e;
      left: 0;
    }

    .accept-btn {
      background-color: #1a8c1a;
      right: 0;
    }

    .button-wrapper.left .slider-track {
      background: linear-gradient(to right, rgba(217, 38, 46, 0.3), rgba(217, 38, 46, 0.1));
    }

    .button-wrapper.right .slider-track {
      background: linear-gradient(to left, rgba(26, 140, 26, 0.3), rgba(26, 140, 26, 0.1));
    }

    .button-label {
      position: absolute;
      bottom: -30px;
      text-align: center;
      width: 100%;
      font-size: 16px;
      font-weight: 500;
    }

    .slide-arrow {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      opacity: 0;
    }

    .left-arrows {
      right: 10px;
    }

    .right-arrows {
      left: 10px;
    }

    .arrow {
      position: absolute;
      width: 12px;
      height: 12px;
      border-top: 2px solid rgba(255, 255, 255, 0.7);
      border-right: 2px solid rgba(255, 255, 255, 0.7);
    }

    .arrow-left {
      transform: rotate(-135deg);
    }

    .arrow-right {
      transform: rotate(45deg);
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.5);
      }
      
      70% {
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(255, 255, 255, 0);
      }
      
      100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255, 255, 255, 0);
      }
    }

    @keyframes arrowAnimate {
      0% {
        opacity: 0;
        transform: translateX(0);
      }
      20% {
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: translateX(15px);
      }
    }

    @keyframes arrowAnimateLeft {
      0% {
        opacity: 0;
        transform: translateX(0);
      }
      20% {
        opacity: 1;
      }
      100% {
        opacity: 0;
        transform: translateX(-15px);
      }
    }

    .arrow-1 {
      animation: arrowAnimate 1.5s infinite;
      animation-delay: 0s;
    }

    .arrow-2 {
      animation: arrowAnimate 1.5s infinite;
      animation-delay: 0.2s;
      margin-right: 15px;
    }

    .arrow-3 {
      animation: arrowAnimate 1.5s infinite;
      animation-delay: 0.4s;
      margin-right: 30px;
    }

    .arrow-4 {
      animation: arrowAnimateLeft 1.5s infinite;
      animation-delay: 0s;
    }

    .arrow-5 {
      animation: arrowAnimateLeft 1.5s infinite;
      animation-delay: 0.2s;
      margin-left: 15px;
    }

    .arrow-6 {
      animation: arrowAnimateLeft 1.5s infinite;
      animation-delay: 0.4s;
      margin-left: 30px;
    }

    .pulsating {
      animation: pulse 1.5s infinite;
    }
    
    .button.disabled {
      opacity: 0.6;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="call-container">
    <div class="call-info">
      <h1>Incoming Call</h1>
      <p>Slide to answer or decline</p>
    </div>
    
    <div class="buttons-container">
      <div class="button-wrapper left">
        <div class="slider-track"></div>
        <div class="button decline-btn" id="declineBtn">
          <i data-lucide="x" stroke="white" stroke-width="3"></i>
        </div>
        <div class="button-label">Decline</div>
        <div class="slide-arrow left-arrows">
          <div class="arrow arrow-left arrow-1"></div>
          <div class="arrow arrow-left arrow-2"></div>
          <div class="arrow arrow-left arrow-3"></div>
        </div>
      </div>
      
      <div class="button-wrapper right">
        <div class="slider-track"></div>
        <div class="button accept-btn" id="acceptBtn">
          <i data-lucide="check" stroke="white" stroke-width="3"></i>
        </div>
        <div class="button-label">Accept</div>
        <div class="slide-arrow right-arrows">
          <div class="arrow arrow-right arrow-4"></div>
          <div class="arrow arrow-right arrow-5"></div>
          <div class="arrow arrow-right arrow-6"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Initializing Lucide icons
    lucide.createIcons();

    // Define button elements
    const declineBtn = document.getElementById('declineBtn');
    const acceptBtn = document.getElementById('acceptBtn');
    const leftArrows = document.querySelector('.left-arrows');
    const rightArrows = document.querySelector('.right-arrows');

    // Track active button
    let activeButton = null;
    let callAnswered = false;
    let callDeclined = false;

    // Start pulsating animation on both buttons
    declineBtn.classList.add('pulsating');
    acceptBtn.classList.add('pulsating');

    // Show arrow animations
    leftArrows.style.display = 'block';
    rightArrows.style.display = 'block';

    // Drag functionality for decline button
    let isDraggingDecline = false;
    let startXDecline = 0;
    let initialLeftDecline = 0;
    const maxDragDecline = 100;

    declineBtn.addEventListener('touchstart', (e) => {
      if (activeButton === null) {
        activeButton = 'decline';
        acceptBtn.classList.add('disabled');
        handleTouchStartDecline(e.touches[0]);
        if (window.navigator.vibrate) {
          window.navigator.vibrate(20);
        }
      }
    });

    declineBtn.addEventListener('mousedown', (e) => {
      if (activeButton === null) {
        activeButton = 'decline';
        acceptBtn.classList.add('disabled');
        handleTouchStartDecline(e);
      }
    });

    document.addEventListener('touchmove', (e) => {
      if (isDraggingDecline) {
        handleTouchMoveDecline(e.touches[0]);
      }
    });

    document.addEventListener('mousemove', (e) => {
      if (isDraggingDecline) {
        handleTouchMoveDecline(e);
      }
    });

    document.addEventListener('touchend', () => {
      if (isDraggingDecline) {
        handleTouchEndDecline();
      }
    });

    document.addEventListener('mouseup', () => {
      if (isDraggingDecline) {
        handleTouchEndDecline();
      }
    });

    function handleTouchStartDecline(e) {
      isDraggingDecline = true;
      startXDecline = e.clientX;
      initialLeftDecline = parseInt(window.getComputedStyle(declineBtn).left);
      declineBtn.style.transition = 'none';
      
      // Stop pulsating animation for decline button
      declineBtn.classList.remove('pulsating');
    }

    function handleTouchMoveDecline(e) {
      if (!isDraggingDecline) return;
      
      const deltaX = e.clientX - startXDecline;
      let newLeft = initialLeftDecline + deltaX;
      
      // Limit drag to right direction only and max distance
      if (newLeft < 0) newLeft = 0;
      if (newLeft > maxDragDecline) newLeft = maxDragDecline;
      
      declineBtn.style.left = `${newLeft}px`;
      
      // If dragged more than threshold, trigger decline
      if (newLeft >= maxDragDecline) {
        performDecline();
      }
    }

    function handleTouchEndDecline() {
      isDraggingDecline = false;
      declineBtn.style.transition = 'transform 0.3s ease, left 0.3s ease';
      declineBtn.style.left = '0px';
      
      // Reset active button if call wasn't declined
      if (!callDeclined) {
        activeButton = null;
        acceptBtn.classList.remove('disabled');
        
        // Resume pulsating
        setTimeout(() => {
          if (!callAnswered && !callDeclined) {
            declineBtn.classList.add('pulsating');
          }
        }, 300);
      }
    }

    // Drag functionality for accept button
    let isDraggingAccept = false;
    let startXAccept = 0;
    let initialRightAccept = 0;
    const maxDragAccept = 100;

    acceptBtn.addEventListener('touchstart', (e) => {
      if (activeButton === null) {
        activeButton = 'accept';
        declineBtn.classList.add('disabled');
        handleTouchStartAccept(e.touches[0]);
        if (window.navigator.vibrate) {
          window.navigator.vibrate(20);
        }
      }
    });

    acceptBtn.addEventListener('mousedown', (e) => {
      if (activeButton === null) {
        activeButton = 'accept';
        declineBtn.classList.add('disabled');
        handleTouchStartAccept(e);
      }
    });

    document.addEventListener('touchmove', (e) => {
      if (isDraggingAccept) {
        handleTouchMoveAccept(e.touches[0]);
      }
    });

    document.addEventListener('mousemove', (e) => {
      if (isDraggingAccept) {
        handleTouchMoveAccept(e);
      }
    });

    document.addEventListener('touchend', () => {
      if (isDraggingAccept) {
        handleTouchEndAccept();
      }
    });

    document.addEventListener('mouseup', () => {
      if (isDraggingAccept) {
        handleTouchEndAccept();
      }
    });

    function handleTouchStartAccept(e) {
      isDraggingAccept = true;
      startXAccept = e.clientX;
      initialRightAccept = parseInt(window.getComputedStyle(acceptBtn).right);
      acceptBtn.style.transition = 'none';
      
      // Stop pulsating animation for accept button
      acceptBtn.classList.remove('pulsating');
    }

    function handleTouchMoveAccept(e) {
      if (!isDraggingAccept) return;
      
      const deltaX = startXAccept - e.clientX;
      let newRight = initialRightAccept + deltaX;
      
      // Limit drag to left direction only and max distance
      if (newRight < 0) newRight = 0;
      if (newRight > maxDragAccept) newRight = maxDragAccept;
      
      acceptBtn.style.right = `${newRight}px`;
      
      // If dragged more than threshold, trigger accept
      if (newRight >= maxDragAccept) {
        performAccept();
      }
    }

    function handleTouchEndAccept() {
      isDraggingAccept = false;
      acceptBtn.style.transition = 'transform 0.3s ease, right 0.3s ease';
      acceptBtn.style.right = '0px';
      
      // Reset active button if call wasn't accepted
      if (!callAnswered) {
        activeButton = null;
        declineBtn.classList.remove('disabled');
        
        // Resume pulsating
        setTimeout(() => {
          if (!callAnswered && !callDeclined) {
            acceptBtn.classList.add('pulsating');
          }
        }, 300);
      }
    }

    function performAccept() {
      callAnswered = true;
      
      // Stop all animations and interactions
      declineBtn.classList.remove('pulsating');
      acceptBtn.classList.remove('pulsating');
      isDraggingAccept = false;
      isDraggingDecline = false;
      
      // Visual feedback
      acceptBtn.style.transform = 'scale(1.2)';
      document.querySelector('.call-info h1').textContent = 'Order Accepted';
      document.querySelector('.call-info p').textContent = 'Setting up route...';
      
      // Hide decline button
      declineBtn.style.opacity = '0.5';
      
      // Vibration feedback
      if (window.navigator.vibrate) {
        window.navigator.vibrate([100, 50, 100]);
      }
    }

    function performDecline() {
      callDeclined = true;
      
      // Stop all animations and interactions
      declineBtn.classList.remove('pulsating');
      acceptBtn.classList.remove('pulsating');
      isDraggingAccept = false;
      isDraggingDecline = false;
      
      // Visual feedback
      declineBtn.style.transform = 'scale(1.2)';
      document.querySelector('.call-info h1').textContent = 'Order Declined';
      document.querySelector('.call-info p').textContent = '';
      
      // Hide accept button
      acceptBtn.style.opacity = '0.5';
      
      // Vibration feedback
      if (window.navigator.vibrate) {
        window.navigator.vibrate([100, 50, 100]);
      }
    }
  </script>
</body>
</html>
